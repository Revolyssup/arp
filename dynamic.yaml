routes:
  # - name: route1
  #   listener: http
  #   matches:
  #     - path: /headers
  #   upstream:
  #     name: backend
  - name: slowheaders
    listener: http
    matches:
      - path: /slowheaders
    upstream:
      name: backend
    plugins:
      - name: responsecache
  - name: stream
    listener: http
    matches:
      - path: /stream
    upstream:
      name: backend
  - name: websocket
    listener: http2
    matches:
      - path: /ws
    upstream:
      name: backend
  - name: discovery
    listener: http
    matches:
      - path: /headers
    upstream:
      discovery:
        type: demo
      service: header
upstreams:
  - name: backend
    nodes:
      - url: http://127.0.0.1:9090
plugins:
  - name: responsecache
    type: responsecache
    config:
      ttl: 30
      key: host
      size: 2
  - name: demo2
    type: demo
    config:
      message: "Hello from demo2 plugin!"
